# Dokcer란?

**도커(docker)**는 어플리케이션과 그 실행에 필요한 모든 요소(라이브러리, 설정, 의존성 등)를 하나의 **컨테이너(container)** 안에 담아 어디서나 일관되게 실행할 수 있게 해준다. 이를 통해 개발 환경, 테스트 환경, 운영 환경이 서로 다르더라도 어플리케이션이 동일하게 동작하게 만든다.

- **이미지(image)** : 컨테이너를 생성하기 위한 템플릿으로, 어플리케이션과 그 실행 환경을 정의한 것이다.
- **컨테이너(container)** : 이미지를 실행한 상태. 각각의 컨테이너는 격리된 공간에서 애플리케이션을 실행하며, 독립적인 환경을 가진다.

## 사용하는 이유

1. 이식성(Portabliity) : 도커 이미지를 사용하면 어디서나 동일한 환경에서 어플리케이션을 실행할 수 있다.
2. 일관성(Consistency) : 모든 의존성, 설정 파일, 환경 변수를 퐇마한 어플리케이션 패키지를 컨테이너로 만들어 배포하기 때문에 개발, 테스트, 운영 ㅗ한경이 항상 일관된다.
3. 경량화 및 효율성(Lightweight & Efficiency) : 기존의 가상 머신과 달리, 돜는 운영체제의 커널을 공유하여 훨씬 가볍고 빠르게 실행할 수 있다. 따라서 리소스 낭비가 적고, 동일한 서버에서 여러 개의 컨테이너를 실행할 수 있다.

## 사용하는 방법

1. 이미지 생성: 도커파일(Dockerfile)을 작성하여 애플리케이션 실행 환경을 정의한 후, `docker build` 명령어를 사용해 이미지를 생성한다.
2. 컨테이너 실행 : 생성된 이미지를 기반으로 `docker run` 명령어를 통해 컨테이너 실행한다. 예를 들어서, `docker run -it -p 8000:8000 myapp` 명령을 사용해 어플리케이션을 실행할 수 있다.
3. 컨테이너 관리 : 도커는 다양한 명령어(`docker ps`, `dokcer rm`, `docker stop`, `docker exec` 등)를 통해 컨테이너를 모니터링하고 관리할 수 있다.

## 사용처

1. CI/CD 파이프라인 : 도커는 어플리케이션을 일관되게 빌드, 테스트, 배포하는데 사용된다. 이를 통해 빠르고 신뢰성 있는 배포 환경을 구성할 수 있다.
2. 마이크로서비스 아키텍처 : 각 서비스를 독립적으로 컨테이너화 하여 관리할 수 있다. 이를 통해 확장성 및 유지보수성이 높은 시스템을 구성할 수 있다.
3. 클라우드 환경 : AWS, Goolge Cloud, Azure 같은 클라우드 플랫폼에서 도커 컨테이너를 사용하여 어플리케이션을 배포하고 관리하는 데 널리 사용한다.

## 발전 과정

도커는 리눅스 컨테이너(LXC)에서 발전한 기술로, 2013년에 처음 공개되었다. 도커는 컨테이너를 더 쉽고 표준화도니 방식으로 할 수 있도록 개선한 기술이다.

## 도커가 없었을 때는?

어플리케이션 배포를 위해 가상머신(VM)을 주로 사용했다. 대표적인 가상 머신 솔루션으로는 VMware나 VirtualBox가 있다.

- 가상 머신(VM) : 운영체제를 포함한 모든 시스템을 가상화하여 격리된 환경을 제공했지만, 가상 머신은 무겁고 느리며, 많은 시스템 리소스를 차지했다. 이 때문에 서버 하나에 여러 개의 가상 머신을 운영하기에는 리소스가 낭비되었었다.

# Uvicorn, Guvicorn의 관계

## Guvicorn과 Uvicorn의 관계

### Guvicorn

- 관리자 역할. 여러 worker 프로세스를 관리하는 프로세스 관리자 역할이다.
- 요청을 수신하고 이를 worker프로세스에 분배하여 병렬처리를 통해 서버의 성능을 향상시킨다.

### Uvicorn

- ASGI 요청을 실제로 처리하는 작업자(worker). ASGI 서버로, FastAPI나 Starlette와 같은 ASGI 애플리케이션의 요청을 처리한다.
- Uvicorn은 비동기 요청을 처리할 수 있어, 웹소켓 같은 실시간 통신과 다수의 요청을 효율적으로 처리하는 데 적합하다.

## 왜 Gunicorn과 Uvicorn을 함께 사용하는가?

Gunicorn은 WSGI 서버이기 때문에 기본적으로 동기 작업을 처리합니다. 하지만, ASGI 서버와 함께 사용할 때는 비동기 작업을 처리할 수 있도록 **Uvicorn worker**를 설정해야 한다.

Uvicorn은 싱글 프로세스 서버로 비동기 처리를 효율적으로 처리하지만 **멀티프로세싱**이나 **로드 밸런싱** 같은 기능은 기본적으로 제공하지 않는다. 

- 기본적인 구조
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e00b2a66-cb1a-4908-9dca-d58fe6200c6c/c7c42932-0171-49b5-abdd-feb24d431ba5/image.png)
    
- 컨테이너에 트래픽이 생길 때
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e00b2a66-cb1a-4908-9dca-d58fe6200c6c/30998d3c-a61b-4da7-9986-031a2ea1b53d/image.png)
    

# Uvicorn, Guvicorn, Docker의 관계

## 2. **Uvicorn, Gunicorn, Docker의 관계**

## 1. 각각의 역할

- **Docker**는 **컨테이너**라는 격리된 환경에서 애플리케이션을 실행하게 해주며, 이를 통해 **Uvicorn**과 **Gunicorn**이 실행되는 환경을 패키징하고 배포할 수 있습니다.
- 애플리케이션의 배포 시, Gunicorn과 Uvicorn을 사용하는 **ASGI 서버**를 도커 이미지로 빌드하여 컨테이너로 배포할 수 있습니다.
- Docker는 이를 통해 애플리케이션이 배포 환경에 상관없이 동일한 설정과 구성으로 실행될 수 있도록 보장합니다. 이는 특히 **CI/CD 파이프라인**에서 효율적으로 사용되며, 여러 서버에 동일한 애플리케이션을 배포할 때 유용합니다.