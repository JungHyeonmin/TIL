# 서버 부하 테스트 가이드 (JMeter 활용)

## 개요
서버 부하 테스트는 애플리케이션 또는 서버가 높은 트래픽을 처리할 수 있는지 평가하는 과정입니다. 이 테스트는 서버의 성능 병목현상을 식별하고, 안정성과 확장성을 개선하기 위해 필요합니다.  
Apache JMeter는 HTTP, HTTPS, FTP 등 다양한 프로토콜을 지원하는 강력한 오픈 소스 성능 테스트 도구입니다.

---

## 왜 서버 부하 테스트를 해야 하나요?

### 1. 성능 평가
- 서버가 예상 트래픽을 견딜 수 있는지 확인합니다.
- 처리량(Throughput), 응답 시간(Response Time), 동시 사용자 수를 기반으로 성능 한계를 파악합니다.

### 2. 병목현상 식별
- 서버의 CPU, 메모리, 디스크 I/O, 네트워크 등 자원 사용률을 모니터링하여 병목현상을 찾아냅니다.

### 3. 확장성 평가
- 서버가 트래픽 증가에 따라 확장 가능한지 확인합니다.

### 4. 안정성 테스트
- 장시간 동안 지속적인 부하를 가해 서버가 안정적으로 작동하는지 점검합니다.

---

## JMeter를 이용한 서버 부하 테스트 가이드

### 1. JMeter 설치
1. [JMeter 공식 웹사이트](https://jmeter.apache.org/download_jmeter.cgi)에서 최신 버전을 다운로드합니다.
2. 다운로드한 압축 파일을 해제하고 실행 파일(`jmeter.bat` 또는 `jmeter.sh`)을 실행합니다.

---

### 2. 테스트 계획 만들기

#### 1. 테스트 계획 생성
- JMeter를 실행한 후, `File > New`를 선택하여 새로운 테스트 계획(Test Plan)을 생성합니다.

#### 2. 스레드 그룹 추가
- 테스트 계획 > 우클릭 > `Add > Threads (Users) > Thread Group`을 선택합니다.
- 아래 설정을 구성합니다:
    - **Number of Threads (users)**: 동시 사용자의 수
    - **Ramp-Up Period (seconds)**: 사용자가 추가되는 시간 간격
    - **Loop Count**: 각 사용자가 요청을 반복하는 횟수

#### 3. HTTP 요청 추가
- 스레드 그룹 > 우클릭 > `Add > Sampler > HTTP Request`를 선택합니다.
- HTTP 요청의 아래 세부 사항을 설정합니다:
    - **Server Name or IP**: 테스트할 서버의 도메인 이름 또는 IP 주소
    - **Path**: 요청할 경로 (예: `/api/v1/resource`)
    - **Port Number**: 서버 포트 (기본 HTTP는 80, HTTPS는 443)

#### 4. 리스너 추가
- HTTP 요청의 결과를 확인하려면 스레드 그룹 > 우클릭 > `Add > Listener > View Results Tree`를 추가합니다.

#### 5. Summary Report 및 그래프 추가
- `Add > Listener > Summary Report`를 추가하여 요약 데이터를 확인합니다.
- `Add > Listener > Graph Results`를 추가하여 트래픽 및 응답 시간에 대한 그래프를 시각화합니다.

---

### 3. 테스트 실행
1. JMeter 상단 메뉴에서 "▶" 버튼을 클릭하여 테스트를 실행합니다.
2. 아래 리스너에서 테스트 결과를 확인합니다:
    - **Summary Report**: 응답 시간, 처리량, 에러 비율 등의 요약 데이터를 테이블로 표시
    - **Graph Results**: 응답 시간과 처리량을 실시간으로 그래프로 시각화

---

### 4. 테스트 결과 분석 방법

#### 4.1 Summary Report 분석
Summary Report는 아래 데이터를 테이블 형식으로 제공합니다:

| 필드        | 설명                                |
|-------------|-------------------------------------|
| **Label**   | 각 요청의 이름                      |
| **Samples** | 총 요청 횟수                        |
| **Average** | 평균 응답 시간 (ms)                 |
| **Min / Max** | 최소 및 최대 응답 시간             |
| **Error %** | 실패한 요청의 비율                  |
| **Throughput** | 초당 처리된 요청 수               |

**분석 예시**:
- 평균 응답 시간이 SLA(Service Level Agreement) 기준을 초과하면 서버 최적화가 필요합니다.
- 에러 비율이 높다면 API 호출이나 서버 상태를 점검해야 합니다.
- Throughput이 증가하지 않거나 감소하면 병목현상이 발생했을 가능성이 높습니다.

---

#### 4.2 Graph Results 분석
Graph Results는 아래 항목을 그래프로 표시합니다:

- **Response Time (ms)**: 응답 시간 추이
- **Throughput**: 초당 처리량
- **Error**: 에러 발생 추이

**분석 예시**:
1. **응답 시간 분석**:
    - 사용자가 증가할수록 응답 시간이 선형적으로 증가하는지 확인합니다.
    - 급격한 응답 시간 증가가 보인다면 서버가 과부하 상태임을 나타냅니다.

2. **처리량 분석**:
    - Throughput이 일정 수준 이상 증가하지 않는다면 네트워크 대역폭 또는 서버 자원(CPU, 메모리)에 병목이 있을 가능성이 큽니다.

3. **에러 분석**:
    - 그래프에서 에러 비율이 상승하는 구간을 확인하고, 해당 시점의 서버 로그를 분석하여 원인을 파악합니다.